<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android Video</title>
    <style type="text/css">
    * {
        font-family: sans-serif;
    }
    div, video {
        width:100%;
    }
    div {
        position: relative;
    }

    div span {
        position: absolute;
        top:10px;
        left:10px;
        font-weight: bold;

    }
  
    </style>
</head>
<body>
	  <div class="buttons">    
        <button class="play">Play</button>
        <button class="pause">Pause</button>
    </div>
    

        <canvas id="normal">

    </canvas>
    
	<video playsinline webkit-playsinline muted preload="none">        
            <source src=neck.webm type=video/webm >    
            <source src=neck.ogv type=video/ogg >    
            <source src=neck.mp4 type=video/mp4 >            
     </video>

         

       <script src="inline-video.js"></script>

     <script>
  
     var video = document.querySelector('video');
     var canvas = document.querySelector('canvas');


        //var steps = Math.ceil(Math.log(video.videoWidth/canvas.width)/Math.log(2));

        //console.log(steps);

        function onload() {
            console.log('video loaded');
            //iv.video.play();

            if (iv.ios) {
                video.style.display = "none";
                canvas.style.display = "block";
            } else {
                canvas.style.display = "none";
                video.style.display = "block";
            }

            toggleVideoPlaying();
        }

        function toggleVideoPlaying() {

            if (!iv.isPlaying) {
                console.log('trying to play the video');
                iv.play();
                if (iv.isPlaying) {                    
                    console.log('video should play succesfully');
                } else {
                    console.log('couldnt play the video');
                }
            } else {
                console.log('pausing video');
                iv.pause();
                
            }

        }


    var iv = new InlineVideo('video', 'canvas', null, null, onload, 25, false);

    video.setAttribute('preload', 'auto');
    iv.video.load();

    document.querySelector('button.play').addEventListener("click", function(){
        iv.play();
    });
    document.querySelector('button.pause').addEventListener("click", function(){
        iv.pause();
    });

        

     </script>
</body>
</html>